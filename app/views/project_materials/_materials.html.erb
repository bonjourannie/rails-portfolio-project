<h1>Materials in the Project <%= @project.name %></h1>
<p>User: <%= link_to @project.user.name, user_path(@project.user) %></p>
<div class="materials-list">
  <% @project.project_materials.each do |project_material| %>
    <h3><%= project_material.material.name %></h3>
    <em>Project Note:</em>
    <div>
      <%= project_material.notes %>
    </div>
      <% if @project.user === current_user %>
        <%= link_to "Add/Edit Note", project_material_path(project_material) %>
        <!-- <a href="#" class="new-note" project-ing-id="<%=project_material.id %>">Add/Edit Note</a>
        <% @project_material = project_material %>
        <div class="new-note-form-<%=project_material.id %>" > -->
        </div>
      <% end %>
      <p></p>
  <% end %>
</div>

<h4><a href="#" class="new-ingredient">+ Add New Ingredient to Recipe</a></h4>
<div class="new-ingredient-form"></div>

<p><%= link_to "Back to Recipe", recipe_path(@recipe) %></p>

<script type="text/javascript">
$(function () {

function Ingredient(name, notes, recipe_id) {
  this.name = name
  this.notes = notes
  this.recipe_id = recipe_id
}

Ingredient.prototype.formatIngredient = function() {
  ingredientHTML = `<li>${this.name}</li><p>New format</p>`
  return ingredientHTML
}

  $(".new-ingredient").on("click", function() {
    $('.new-ingredient-form').html(` <%= render partial: 'new_ingredient' %> `)
    $('.edit_recipe').on("submit", function(ingredient) {
      debugger
      $('.ingredients-list').append(ingredientHTML);
      event.preventDefault();
    });
    event.preventDefault();
  });



});

$(function () {
  $(".new-note").on("click", function() {
    var recipeIng = $(".new-note").attr("recipe-ing-id");
    var newNoteForm = ".new-note-form-" + recipeIng
    var recipeIngredient = `#{@recipe_ingredient}`
    $(newNoteForm).html(` <%= render partial: 'new_note', :recipe_ingredient => `#{@recipe_ingredient}` %>`)
    event.preventDefault();
  });
});
</script>